<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>LMD Editor Sample</title>

  <script type="module" src="/build/lmd-editor.esm.js"></script>
  <script nomodule src="/build/lmd-editor.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/chota@latest">
  <style>
    .fit-width {
      margin-left: 0;
      margin-right: 0;
    }

    .card {
      height: 100%;
    }

    #preview pre {
      max-height: 90vh;
      margin: 0;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>INCLDE Demonstrator</h1>
    <p>
      INCLDE (spelled as "include") stands for <strong>INC</strong>ludable <strong>L</strong>inked <strong>D</strong>ata <strong>E</strong>ditor.
      This page demonstrates the integration of the editor into a styled page.
      Just imagine this is some research environment. It could be a digital lab notebook, a research data repository, or a research data management system.
      You are at a point where you would like to input some research metadata or data. The following component shall offer an easy environment to do so.
      This is not an image. You can use the editor right here.
    </p>
  </div>
  <div class="row fit-width">
    <div id="editor" class="col-8 card"></div>
    <div id="preview" class="col-4 card">
      <p>Preview (not part of the component!)</p>
      <pre id="output">JSON preview will appear here after changes!</pre>
    </div>
  </div>
  
  <script>
    const config = {
      "title": "INCLDE Demo Instance",
      "hideAttributesByDefault": false,
      "allowNewAttributes": true,
      "attributConfig": [
        {
          "onType": "*",
          "attributes": [
            {
              "name": "@id",
              "readOnly": true,
              "hidden": false
            }
          ]
        },
        {
          "onId": "https://adhesivewombat.bandcamp.com/track/8-bit-adventure",
          "attributes": [
            {
              "name": "http://schema.org/duration",
              "hidden": true
            }
          ]
        }
      ]
    }

    fetch("/samples/bandcamp.jsonld")
      .then((response) => response.json())
      .then((data) => {
        console.log("Successfully fetched data", data);
        const lmdEditor = document.createElement("lmd-editor");
        lmdEditor.data = data;
        lmdEditor.config = config;
        document.getElementById("editor").appendChild(lmdEditor);
        let result = JSON.stringify(data, null, 2);
        document.getElementById("output").textContent = result
        lmdEditor.addEventListener('editorClosed', event => {
          console.log('event', event.detail);
        })
        lmdEditor.addEventListener('dataUpdated', event => {
          console.log('event', event.detail);
          let result = JSON.stringify(event.detail, null, 2);
          document.getElementById("output").textContent = result
        })
      });
  </script>
</body>

</html>
